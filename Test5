local Library = {}
local OpenedTab = nil
local FirstTab = true
local uis = game:GetService("UserInputService")
local LibraryFont = Font.new("rbxasset://fonts/families/Jura.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal)
local LabelFont = Font.new("rbxasset://fonts/families/Jura.json", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
function Library.Create()

    local WindowTable = {}
    local Nexaris = Instance.new("ScreenGui")
    Nexaris.Name = "Nexaris"
    Nexaris.Parent = game:GetService("CoreGui")
    Nexaris.ResetOnSpawn = false

    uis.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.RightShift then
            Nexaris.Enabled = not Nexaris.Enabled
        end
    end)

    local Window = Instance.new("Frame")
    Window.Name = "Window"
    Window.Parent = Nexaris
    Window.AnchorPoint = Vector2.new(0.5, 0.5)
    Window.BackgroundColor3 = Color3.fromRGB(26, 26, 26)
    Window.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Window.BorderSizePixel = 0
    Window.Position = UDim2.new(0.5, 0, 0.5, 0)
    Window.Size = UDim2.new(0, 600, 0, 400)

    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 10)
    Corner.Name = "Corner"
    Corner.Parent = Window

    local Gradient = Instance.new("UIGradient")
    Gradient.Color = ColorSequence.new {ColorSequenceKeypoint.new(0.00, Color3.fromRGB(193, 193, 193)),
                                        ColorSequenceKeypoint.new(0.10, Color3.fromRGB(255, 255, 255)),
                                        ColorSequenceKeypoint.new(0.90, Color3.fromRGB(255, 255, 255)),
                                        ColorSequenceKeypoint.new(1.00, Color3.fromRGB(193, 193, 193))}
    Gradient.Name = "Gradient"
    Gradient.Parent = Window

    local Decoration = Instance.new("Folder")
    Decoration.Name = "Decoration"
    Decoration.Parent = Window

    local Line = Instance.new("Frame")
    Line.Name = "Line"
    Line.Parent = Decoration
    Line.AnchorPoint = Vector2.new(0.5, 0.5)
    Line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Line.BackgroundTransparency = 0.500
    Line.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Line.BorderSizePixel = 0
    Line.Position = UDim2.new(0.25, 0, 0.5, 0)
    Line.Size = UDim2.new(0, 2, 0.95, 0)

    local FadeGradient = Instance.new("UIGradient")
    FadeGradient.Rotation = 90
    FadeGradient.Transparency = NumberSequence.new {NumberSequenceKeypoint.new(0.00, 1.00),
                                                    NumberSequenceKeypoint.new(0.10, 0.00),
                                                    NumberSequenceKeypoint.new(0.90, 0.00),
                                                    NumberSequenceKeypoint.new(1.00, 1.00)}
    FadeGradient.Name = "Gradient"
    FadeGradient.Parent = Line

    local TabButtons = Instance.new("ScrollingFrame")
    local Layout = Instance.new("UIListLayout")
    TabButtons.Name = "TabButtons"
    TabButtons.Parent = Window
    TabButtons.BackgroundTransparency = 1.000
    TabButtons.BorderSizePixel = 0
    TabButtons.Size = UDim2.new(0.25, 0, 1, 0)
    TabButtons.ScrollBarThickness = 0

    Layout.Name = "Layout"
    Layout.Parent = TabButtons
    Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    Layout.SortOrder = Enum.SortOrder.LayoutOrder

    local TabDisplay = Instance.new("Frame")
    TabDisplay.Name = "TabDisplay"
    TabDisplay.Parent = Window
    TabDisplay.AnchorPoint = Vector2.new(1, 0)
    TabDisplay.BackgroundTransparency = 1.000
    TabDisplay.BorderSizePixel = 0
    TabDisplay.Position = UDim2.new(0.98, 0, 0, 0)
    TabDisplay.Size = UDim2.new(0.71, 0, 1, 0)

    function WindowTable:Tab(TabName)
        local Elements = {}

        if FirstTab then
            FirstTab = false
            OpenedTab = TabName
        end

        local TabButton = Instance.new("TextButton")
        local TabCorner = Instance.new("UICorner")
        TabButton.Name = TabName or "New Tab"
        TabButton.Parent = TabButtons
        TabButton.BackgroundColor3 = Color3.fromRGB(24, 24, 24)
        TabButton.BackgroundTransparency = 1.000
        TabButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
        TabButton.BorderSizePixel = 0
        TabButton.Size = UDim2.new(0.9, 0, 0, 45)
        TabButton.FontFace = LibraryFont
        TabButton.Text = TabName
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.TextScaled = true
        TabButton.TextSize = 14.000
        TabButton.TextWrapped = true

        TabCorner.CornerRadius = UDim.new(0, 10)
        TabCorner.Name = "Corner"
        TabCorner.Parent = TabButton

        TabButton.MouseButton1Click:Connect(function()
            OpenedTab = TabName
        end)

        local TabWindow = Instance.new("ScrollingFrame")
        TabWindow.Name = TabName
        TabWindow.Parent = TabDisplay
        TabWindow.Active = true
        TabWindow.BackgroundTransparency = 1.000
        TabWindow.BorderSizePixel = 0
        TabWindow.Size = UDim2.new(1, 0, 1, 0)
        TabWindow.ScrollBarThickness = 0

        local TabLayout = Instance.new("UIListLayout")
        TabLayout.Name = "Layout"
        TabLayout.Parent = TabWindow
        TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
        TabLayout.Padding = UDim.new(0, 10)

        task.spawn(function()
            while TabWindow do
                task.wait()
                TabWindow.CanvasSize = UDim2.fromOffset(0, (#TabWindow:GetChildren() * 55))
            end
        end)

        function Elements:Label(Text)
            local NewLabel = Instance.new("Frame")
            local Title = Instance.new("TextLabel")
            NewLabel.Name = "Label"
            NewLabel.Parent = TabWindow
            NewLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            NewLabel.BackgroundTransparency = 1.000
            NewLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
            NewLabel.BorderSizePixel = 0
            NewLabel.Size = UDim2.new(1, 0, 0, 45)

            Title.Name = "Title"
            Title.Parent = NewLabel
            Title.BackgroundTransparency = 1.000
            Title.BorderSizePixel = 0
            Title.Size = UDim2.new(1, 0, 1, 0)
            Title.FontFace = LabelFont
            Title.TextColor3 = Color3.fromRGB(255, 255, 255)
            Title.TextScaled = true
            Title.Text = Text
        end

        function Elements:Button(Text, Callback)
            local NewButton = Instance.new("Frame")
            local Title = Instance.new("TextLabel")
            local Interact = Instance.new("TextButton")
            NewButton.Name = "Button"
            NewButton.Parent = TabWindow
            NewButton.BackgroundTransparency = 1.000
            NewButton.BorderSizePixel = 0
            NewButton.Size = UDim2.new(1, 0, 0, 45)

            Title.Name = "Title"
            Title.Parent = NewButton
            Title.BackgroundTransparency = 1.000
            Title.BorderSizePixel = 0
            Title.Size = UDim2.new(1, 0, 1, 0)
            Title.ZIndex = 2
            Title.FontFace = LibraryFont
            Title.Text = Text
            Title.TextColor3 = Color3.fromRGB(255, 255, 255)
            Title.TextScaled = true
            Title.TextSize = 14.000
            Title.TextWrapped = true
            Title.TextXAlignment = Enum.TextXAlignment.Left

            Interact.Name = "Interact"
            Interact.Parent = NewButton
            Interact.BackgroundColor3 = Color3.fromRGB(26, 26, 26)
            Interact.BackgroundTransparency = 0.990
            Interact.BorderSizePixel = 0
            Interact.Size = UDim2.new(1, 0, 1, 0)
            Interact.AutoButtonColor = false
            Interact.Text = ""

            Interact.MouseButton1Click:Connect(Callback)
        end

        function Elements:Toggle(Text, Default, Callback)
            local Toggled = Default or false

            local Colors = {Color3.new(0, 1, 0), Color3.new(1, 0, 0)}

            local NewToggle = Instance.new("Frame")
            local Title = Instance.new("TextLabel")
            local ToggleColor = Instance.new("Frame")
            local Corner = Instance.new("UICorner")
            local Interact = Instance.new("TextButton")

            NewToggle.Name = "Toggle"
            NewToggle.Parent = TabWindow
            NewToggle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            NewToggle.BackgroundTransparency = 1.000
            NewToggle.BorderColor3 = Color3.fromRGB(0, 0, 0)
            NewToggle.BorderSizePixel = 0
            NewToggle.Size = UDim2.new(1, 0, 0, 45)

            Title.Name = "Title"
            Title.Parent = NewToggle
            Title.BackgroundTransparency = 1.000
            Title.BorderSizePixel = 0
            Title.Size = UDim2.new(0.8, 0, 1, 0)
            Title.FontFace = LibraryFont
            Title.Text = Text
            Title.TextColor3 = Color3.fromRGB(255, 255, 255)
            Title.TextScaled = true
            Title.TextWrapped = true
            Title.TextXAlignment = Enum.TextXAlignment.Left

            ToggleColor.Parent = NewToggle
            ToggleColor.AnchorPoint = Vector2.new(0, 0.5)
            ToggleColor.BackgroundTransparency = 0.500
            ToggleColor.BorderSizePixel = 0
            ToggleColor.Position = UDim2.new(0.8, 0, 0.5, 0)
            ToggleColor.Size = UDim2.new(0.15, 0, 0.9, 0)

            Corner.CornerRadius = UDim.new(0, 10)
            Corner.Name = "Corner"
            Corner.Parent = ToggleColor

            Interact.Name = "Interact"
            Interact.Parent = NewToggle
            Interact.BackgroundColor3 = Color3.fromRGB(26, 26, 26)
            Interact.BackgroundTransparency = 0.990
            Interact.BorderSizePixel = 0
            Interact.Size = UDim2.new(1, 0, 1, 0)
            Interact.AutoButtonColor = false
            Interact.Text = ""

            Interact.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                Callback(Toggled)
            end)

            task.spawn(function()
                while task.wait() do
                    if Toggled then
                        ToggleColor.BackgroundColor3 = Colors[1]
                    else
                        ToggleColor.BackgroundColor3 = Colors[2]
                    end
                end
            end)

        end

        function Elements:TextBox(Text, Callback)
            local NewTextBox = Instance.new("Frame")
            local Title = Instance.new("TextLabel")
            local ActiveTextBox = Instance.new("TextBox")
            local Line = Instance.new("Frame")
            local FadeEffect = Instance.new("UIGradient")

            NewTextBox.Name = "NewTextBox"
            NewTextBox.Parent = TabWindow
            NewTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            NewTextBox.BackgroundTransparency = 1.000
            NewTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
            NewTextBox.BorderSizePixel = 0
            NewTextBox.Size = UDim2.new(1, 0, 0, 45)

            Title.Name = "Title"
            Title.Parent = NewTextBox
            Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Title.BackgroundTransparency = 1.000
            Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
            Title.BorderSizePixel = 0
            Title.Size = UDim2.new(1, 0, 1, 0)
            Title.FontFace = LibraryFont
            Title.Text = Text
            Title.TextColor3 = Color3.fromRGB(255, 255, 255)
            Title.TextScaled = true
            Title.TextSize = 14.000
            Title.TextWrapped = true
            Title.TextXAlignment = Enum.TextXAlignment.Left

            ActiveTextBox.Parent = NewTextBox
            ActiveTextBox.AnchorPoint = Vector2.new(1, 0.5)
            ActiveTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            ActiveTextBox.BackgroundTransparency = 1.000
            ActiveTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
            ActiveTextBox.BorderSizePixel = 0
            ActiveTextBox.Position = UDim2.new(1, 0, 0.5, 0)
            ActiveTextBox.Size = UDim2.new(0.3, 0, 0.8, 0)
            ActiveTextBox.FontFace = LibraryFont
            ActiveTextBox.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
            ActiveTextBox.Text = ""
            ActiveTextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
            ActiveTextBox.TextScaled = true
            ActiveTextBox.TextSize = 14.000
            ActiveTextBox.TextWrapped = true

            Line.Name = "Line"
            Line.Parent = ActiveTextBox
            Line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Line.BorderColor3 = Color3.fromRGB(0, 0, 0)
            Line.BorderSizePixel = 0
            Line.Position = UDim2.new(0, 0, 1, 3)
            Line.Size = UDim2.new(1, 0, 0, 2)

            FadeEffect.Transparency = NumberSequence.new {NumberSequenceKeypoint.new(0.00, 1.00),
                                                          NumberSequenceKeypoint.new(0.50, 0.10),
                                                          NumberSequenceKeypoint.new(1.00, 1.00)}
            FadeEffect.Name = "Gradient"
            FadeEffect.Parent = Line

            ActiveTextBox.FocusLost:Connect(function(Entered)
                if Entered then
                    Callback(tostring(ActiveTextBox.Text))
                    ActiveTextBox.Text = ""
                end
            end)

        end

        return Elements
    end

    function WindowTable:Exit()
        Nexaris:Destroy()
    end

    task.spawn(function()
        while Window do
            task.wait()
            for _, v in pairs(TabDisplay:GetChildren()) do
                if v:IsA("ScrollingFrame") then
                    if v.Name == OpenedTab then
                        v.Visible = true
                    else
                        v.Visible = false
                    end
                end
            end
        end
    end)

    return WindowTable
end

return Library
